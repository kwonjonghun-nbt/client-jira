# PRD: Client Jira - Jira Data Collector & Dashboard

## 1. 프로젝트 개요

### 1.1 프로젝트명
**Client Jira** - 개인용 Jira 데이터 수집 및 시각화 대시보드

### 1.2 배경 및 동기
- 회사 Jira에서 제공하는 기본 대시보드가 원하는 형태로 데이터를 보여주지 않음
- 여러 과제의 리소스 배분, 일정 관리를 한눈에 파악하고 싶음
- Jira 로우데이터를 직접 가공하여 맞춤형 시각화가 필요

### 1.3 목적
Jira API를 통해 과제 데이터를 주기적으로 수집하고, 로컬에 저장하여 다양한 시각화 대시보드를 구축하기 위한 데이터 파이프라인 + 뷰어 데스크톱 앱

### 1.4 핵심 가치
- **자동화**: 하루 3회 자동 데이터 수집으로 수동 작업 제거
- **커스터마이징**: 원하는 형태로 자유롭게 시각화
- **로컬 완결**: 서버 없이 데스크톱에서 모든 기능 동작
- **데이터 축적**: 시간에 따른 과제 변화 추적 가능

---

## 2. 사용자

### 2.1 타겟 사용자
- 본인 (1인 사용)
- 향후 팀원에게 공유 가능성 있음

### 2.2 사용 환경
- macOS 데스크톱
- 회사 네트워크에서 Jira Cloud/Server 접근 가능

---

## 3. 기능 요구사항

### Phase 1: 데이터 수집 엔진 (MVP)

#### F1. Jira 연결 설정
- Jira 서버 URL 입력
- 인증 정보 설정 (API Token + Email 또는 PAT)
- 연결 테스트 기능
- 인증 정보는 OS keychain(Electron safeStorage)에 암호화 저장

#### F2. 데이터 수집 대상 설정
- 수집할 프로젝트 선택 (다중 선택)
- JQL 커스텀 필터 설정 (고급)
- 수집할 담당자 필터링
- 수집 필드 선택 (summary, status, assignee, priority, sprint, story point, 등)

#### F3. 자동 수집 스케줄러
- 하루 3회 자동 수집 (기본: 09:00, 13:00, 18:00)
- 수집 시간 사용자 커스터마이징 가능
- 시스템 트레이 상주하여 백그라운드 동작
- 수집 성공/실패 시 시스템 알림(notification)

#### F4. 수동 싱크
- 메인 화면 싱크 버튼으로 즉시 최신 데이터 가져오기
- 트레이 메뉴에서도 싱크 가능
- 싱크 중 진행 상태 표시 (프로그레스)
- 마지막 싱크 시간 표시

#### F5. 데이터 저장
- JSON 파일로 로컬 저장
- 저장 구조:
  ```
  data/
    ├── raw/                    # 원본 데이터 (날짜별)
    │   ├── 2025-02-06/
    │   │   ├── 09-00.json      # 시간대별 스냅샷
    │   │   ├── 13-00.json
    │   │   └── 18-00.json
    │   └── 2025-02-07/
    │       └── ...
    ├── latest.json             # 최신 스냅샷
    └── meta.json               # 수집 메타정보
  ```
- 데이터 보존 기간 설정 (기본 90일, 이후 자동 정리)

#### F6. 데이터 뷰어 (기본)
- 수집된 과제 목록 테이블 뷰
- 필터링 (프로젝트, 상태, 담당자)
- 검색 기능
- 마지막 수집 시간 및 데이터 통계 표시

### Phase 2: 시각화 대시보드 (추후)

#### F7. 대시보드 프레임워크
- 드래그 앤 드롭 위젯 기반 대시보드
- 복수 대시보드 생성/관리
- 대시보드 레이아웃 저장

#### F8. 시각화 위젯 (예정)
- 리소스 배분 차트 (담당자별 업무량)
- 스프린트 번다운 차트
- 상태별 분포 (파이/도넛 차트)
- 일정 타임라인 (간트 차트)
- 트렌드 차트 (시간별 변화)
- 우선순위 히트맵

---

## 4. 비기능 요구사항

### 4.1 성능
- 수집 시 UI 블로킹 없음 (백그라운드 프로세스)
- 1000개 이상 이슈 수집 시에도 원활 동작 (페이지네이션)
- 앱 시작 시간 3초 이내

### 4.2 보안
- Jira 인증 정보는 Electron safeStorage로 암호화 저장
- 수집 데이터는 로컬에만 저장 (외부 전송 없음)

### 4.3 안정성
- 네트워크 오류 시 재시도 (최대 3회)
- 수집 실패 시 이전 데이터 유지
- 앱 크래시 후 재시작 시 스케줄 자동 복구

### 4.4 사용성
- 최소한의 설정으로 바로 사용 가능
- 시스템 트레이에서 주요 동작 가능
- 한국어 UI

---

## 5. 기술 스택

### 5.1 코어
| 구분 | 기술 | 선정 이유 |
|------|------|-----------|
| 프레임워크 | **Electron** | 데스크톱 앱, 시스템 트레이, 로컬 파일 접근 |
| 빌드 도구 | **Electron Forge** + **Vite** | 빠른 HMR, 간편한 빌드/패키징 |
| UI 프레임워크 | **React 18** + **TypeScript** | 컴포넌트 기반, 타입 안전성 |
| 서버 상태 | **TanStack Query (React Query)** | Jira API 캐싱, 리페칭, 로딩/에러 상태 관리 |
| 클라이언트 상태 | **Zustand** | 앱 설정, UI 상태 등 로컬 상태 관리 |
| 스타일링 | **Tailwind CSS** | 빠른 UI 개발, 유틸리티 기반 |
| 스키마 검증 | **Zod** | Jira API 응답 검증, 설정값 타입 안전성 |
| 유틸리티 | **@toss/utils**, **es-toolkit** | 범용 유틸, lodash 대체 (트리쉐이킹 최적화) |
| 훅 라이브러리 | **use-hooks** | 재사용 가능한 React 커스텀 훅 |

### 5.2 데이터 수집
| 구분 | 기술 | 선정 이유 |
|------|------|-----------|
| HTTP 클라이언트 | **axios** | Jira REST API 호출 |
| 스케줄러 | **node-cron** | 앱 내 cron 스케줄링 |
| 데이터 저장 | **JSON 파일** (Phase 1) → **SQLite** (Phase 2) | 단순 시작, 필요시 확장 |

### 5.3 Jira 환경
| 구분 | 내용 |
|------|------|
| 플랫폼 | **Jira Cloud** (*.atlassian.net) |
| API 버전 | **REST API v3** |
| 인증 방식 | **API Token** + Email (Basic Auth) |

### 5.4 시각화 (Phase 2)
| 구분 | 기술 | 선정 이유 |
|------|------|-----------|
| 차트 | **Recharts** 또는 **Chart.js** | React 친화적, 다양한 차트 |
| 테이블 | **TanStack Table** | 고성능 테이블, 필터/정렬 |
| 레이아웃 | **react-grid-layout** | 드래그 앤 드롭 대시보드 |

### 5.5 개발 도구
| 구분 | 기술 |
|------|------|
| 패키지 매니저 | **pnpm** |
| 린트 | **ESLint** + **Prettier** |
| 테스트 | **Vitest** |

---

## 6. 아키텍처

```
┌─────────────────────────────────────────────┐
│                Electron App                  │
│                                              │
│  ┌─────────────────┐  ┌──────────────────┐  │
│  │   Main Process   │  │ Renderer Process  │  │
│  │                   │  │                   │  │
│  │  - Jira API 호출  │  │  - React UI       │  │
│  │  - node-cron      │  │  - 데이터 뷰어    │  │
│  │  - 파일 I/O       │  │  - 설정 화면      │  │
│  │  - 시스템 트레이   │  │  - (Phase2) 차트  │  │
│  │  - safeStorage    │  │                   │  │
│  │                   │  │                   │  │
│  └────────┬──────────┘  └────────┬──────────┘  │
│           │      IPC Bridge      │              │
│           └──────────────────────┘              │
│                                                  │
│  ┌──────────────────────────────────────────┐   │
│  │              Local Storage                │   │
│  │  data/raw/*.json  |  data/latest.json    │   │
│  └──────────────────────────────────────────┘   │
└─────────────────────────────────────────────────┘
```

### 6.1 프로세스 분리
- **Main Process**: Jira API 호출, 스케줄링, 파일 I/O, 시스템 트레이
- **Renderer Process**: React UI, 데이터 표시, 사용자 인터랙션
- **IPC 통신**: Main ↔ Renderer 간 데이터 전달

---

## 7. 데이터 모델

### 7.1 수집 데이터 (latest.json)
```json
{
  "syncedAt": "2025-02-06T09:00:00+09:00",
  "source": {
    "baseUrl": "https://company.atlassian.net",
    "projects": ["PROJ-A", "PROJ-B"]
  },
  "issues": [
    {
      "key": "PROJ-A-123",
      "summary": "로그인 기능 개선",
      "status": "In Progress",
      "statusCategory": "indeterminate",
      "assignee": "홍길동",
      "reporter": "김철수",
      "priority": "High",
      "issueType": "Story",
      "storyPoints": 5,
      "sprint": "Sprint 24",
      "labels": ["frontend"],
      "components": ["auth"],
      "created": "2025-01-15T10:00:00+09:00",
      "updated": "2025-02-05T14:30:00+09:00",
      "dueDate": "2025-02-14",
      "resolution": null,
      "timeTracking": {
        "originalEstimate": "3d",
        "remainingEstimate": "1d",
        "timeSpent": "2d"
      },
      "parent": "PROJ-A-100",
      "subtasks": ["PROJ-A-124", "PROJ-A-125"]
    }
  ],
  "totalCount": 47
}
```

### 7.2 메타 데이터 (meta.json)
```json
{
  "lastSync": "2025-02-06T09:00:00+09:00",
  "syncHistory": [
    {
      "timestamp": "2025-02-06T09:00:00+09:00",
      "type": "scheduled",
      "issueCount": 47,
      "duration": 2340,
      "success": true
    }
  ],
  "settings": {
    "schedule": ["09:00", "13:00", "18:00"],
    "retentionDays": 90
  }
}
```

---

## 8. 화면 구성

### 8.1 메인 화면
```
┌──────────────────────────────────────────┐
│  Client Jira            [_][□][X]        │
├──────────────────────────────────────────┤
│  ┌────┐                                  │
│  │설정│  마지막 싱크: 2025-02-06 09:00    │
│  │과제│  총 47건 | 3개 프로젝트           │
│  │    │                                  │
│  │    │  [🔄 지금 싱크] [자동: ON]       │
│  │    │                                  │
│  │    │  ┌──────────────────────────┐    │
│  │    │  │ 필터: [프로젝트▼][상태▼] │    │
│  │    │  │ 검색: [_______________]  │    │
│  │    │  ├──────────────────────────┤    │
│  │    │  │ KEY    | 제목  | 상태   │    │
│  │    │  │ PA-123 | 로그인| 진행중 │    │
│  │    │  │ PA-124 | 회원  | 완료   │    │
│  │    │  │ ...                      │    │
│  │    │  └──────────────────────────┘    │
│  └────┘                                  │
├──────────────────────────────────────────┤
│  다음 싱크: 13:00 (3시간 27분 후)        │
└──────────────────────────────────────────┘
```

### 8.2 설정 화면
```
┌──────────────────────────────────────────┐
│  설정                                     │
├──────────────────────────────────────────┤
│                                           │
│  ■ Jira 연결                              │
│    URL: [https://company.atlassian.net]   │
│    Email: [user@company.com]              │
│    API Token: [••••••••••] [테스트]       │
│                                           │
│  ■ 수집 대상                              │
│    프로젝트: [☑ PROJ-A] [☑ PROJ-B]      │
│    담당자: [☑ 전체] 또는 [특정 사용자]    │
│    JQL (고급): [________________________] │
│                                           │
│  ■ 스케줄                                 │
│    자동 수집: [ON]                        │
│    시간: [09:00] [13:00] [18:00] [+ 추가] │
│                                           │
│  ■ 저장                                   │
│    저장 경로: [~/client-jira-data] [변경]  │
│    보존 기간: [90]일                      │
│                                           │
│                        [저장] [취소]       │
└──────────────────────────────────────────┘
```

### 8.3 시스템 트레이
```
[아이콘] Client Jira
  ├── 지금 싱크
  ├── ─────────
  ├── 마지막: 09:00 (47건)
  ├── 다음: 13:00
  ├── ─────────
  ├── 자동 수집: ON/OFF
  ├── 대시보드 열기
  └── 종료
```

---

## 9. 개발 로드맵

### Phase 1: MVP - 데이터 수집 엔진 (현재)
1. **프로젝트 셋업** - Electron + React + TypeScript 보일러플레이트
2. **Jira 연결** - 설정 화면, API 인증, 연결 테스트
3. **데이터 수집** - Jira REST API 연동, 이슈 fetch
4. **자동 스케줄러** - node-cron, 시스템 트레이 상주
5. **데이터 저장** - JSON 파일 저장 구조
6. **기본 뷰어** - 이슈 목록 테이블, 필터, 검색

### Phase 2: 시각화 대시보드
7. **차트 위젯** - 리소스, 스프린트, 상태 차트
8. **대시보드 빌더** - 드래그 앤 드롭 레이아웃
9. **데이터 분석** - 트렌드, 비교, 예측

### Phase 3: 고도화
10. **SQLite 마이그레이션** - 대량 데이터 성능 개선
11. **내보내기** - CSV, PDF 리포트
12. **공유** - 설정/대시보드 export/import

---

## 10. 제약 사항 및 리스크

| 항목 | 내용 | 대응 |
|------|------|------|
| Jira API Rate Limit | Cloud: 기본 요청 제한 있음 | 페이지네이션, 필요한 필드만 요청 |
| 네트워크 의존성 | VPN/사내망 필요할 수 있음 | 오프라인 시 캐시 데이터 사용 |
| Electron 용량 | 앱 크기 ~150MB+ | Tauri 마이그레이션 검토 (Phase 3) |
| 데이터 누적 | 장기 사용 시 JSON 파일 비대화 | 보존 기간 설정, SQLite 전환 (Phase 2) |

---

## 11. 성공 지표

- [ ] Jira API 연동하여 이슈 데이터 수집 성공
- [ ] 하루 3회 자동 수집 안정 동작 (1주일 무중단)
- [ ] 수동 싱크 버튼으로 즉시 데이터 갱신
- [ ] 수집된 데이터로 이슈 목록 조회/필터링 가능
- [ ] 시스템 트레이 상주하여 백그라운드 동작
