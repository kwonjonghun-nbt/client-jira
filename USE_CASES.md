# Client Jira — 기능별 필수 유즈케이스

> 커밋 히스토리 기반으로 정리한 기능 단위 검증 항목.
> 각 항목은 `describe > it` 구조의 텍스트 테스트 코드로 기술.

---

## 1. 설정 (Settings)

```
describe('Jira 연결 설정')
  it('baseUrl, email, token을 입력하고 저장하면 settings.json에 반영된다')
  it('저장된 토큰은 safeStorage로 암호화되며, 재로드 시 마스킹(••••)으로 표시된다')
  it('safeStorage 미지원 환경에서는 plaintext fallback으로 저장된다')
  it('테스트 연결 버튼 클릭 시 Jira API v3 /myself 호출로 인증을 검증한다')
  it('연결 실패 시 에러 메시지를 사용자에게 표시한다')

describe('수집 대상 설정')
  it('프로젝트 목록을 Jira에서 가져와 멀티셀렉트로 선택할 수 있다')
  it('담당자(assignees)를 수동 입력하여 여러 명 등록할 수 있다')

describe('스케줄 설정')
  it('자동 싱크 on/off 토글이 동작한다')
  it('싱크 시각을 여러 개 등록할 수 있다 (예: 09:00, 13:00, 18:00)')
  it('등록된 시각에 cron 스케줄러가 자동으로 싱크를 트리거한다')

describe('저장 설정')
  it('보관 기간(retentionDays) 설정이 가능하다')
  it('설정된 기간보다 오래된 스냅샷이 자동 삭제된다')
```

---

## 2. 데이터 동기화 (Sync)

```
describe('수동 싱크')
  it('싱크 버튼 클릭 시 Jira REST API v3으로 이슈를 가져온다')
  it('싱크 진행 중 프로그레스 바에 현재/전체 건수와 퍼센트를 표시한다')
  it('싱크 완료 시 latest.json에 정규화된 이슈 데이터를 저장한다')
  it('싱크 완료 시 날짜별 스냅샷 파일을 생성한다')
  it('이미 싱크 진행 중이면 중복 실행을 방지한다')
  it('싱크 실패 시 에러 메시지를 표시하고, meta에 실패 이력을 기록한다')

describe('변경 추적')
  it('이전 싱크 데이터와 비교하여 상태/담당자/우선순위/SP/해결 변경을 감지한다')
  it('신규 생성된 이슈를 감지한다')
  it('변경사항을 changelog.json에 누적 기록한다')
  it('변경 이력이 없으면 changelog를 갱신하지 않는다')

describe('싱크 상태 표시')
  it('마지막 싱크 시각과 총 이슈 수를 상태바에 표시한다')
  it('싱크 대상 프로젝트 목록을 표시한다')
```

---

## 3. 과제 목록 (Main Page)

```
describe('이슈 테이블')
  it('동기화된 이슈를 테이블 형태로 표시한다 (키, 요약, 상태, 담당자, 우선순위, 이슈타입)')
  it('데이터 미존재 시 "설정으로 이동" 안내와 싱크 버튼을 표시한다')
  it('이슈 키 클릭 시 외부 브라우저에서 Jira 페이지를 연다')
  it('이슈 행 클릭 시 이슈 상세 모달이 열린다')
  it('필터링된 건수와 전체 건수를 상단에 표시한다')

describe('필터')
  it('상태(statusCategory) 토글 필터로 new/indeterminate/done을 선택/해제할 수 있다')
  it('이슈타입 MultiSelect 필터로 복수의 타입을 선택할 수 있다')
  it('담당자 필터로 특정 담당자의 이슈만 표시할 수 있다')
  it('라벨 필터로 특정 라벨의 이슈만 표시할 수 있다')
  it('스프린트 필터로 특정 스프린트의 이슈만 표시할 수 있다')
  it('텍스트 검색으로 키 또는 요약에 포함된 문자열을 검색할 수 있다')
  it('모든 필터를 복합 적용할 수 있다 (AND 조건)')

describe('이슈 상세 모달')
  it('이슈의 전체 필드(키, 요약, 설명, 상태, 담당자, 우선순위, 라벨, 컴포넌트, SP, 스프린트, 생성일, 수정일, 마감일, 해결상태)를 표시한다')
  it('ESC 키로 모달을 닫을 수 있다')
  it('AI 프롬프트 복사 버튼 클릭 시 이슈 타입별 Description 템플릿이 적용된 프롬프트를 클립보드에 복사한다')
  it('Jira 링크 버튼 클릭 시 외부 브라우저에서 해당 이슈 페이지를 연다')
```

---

## 4. 대시보드 (Dashboard)

```
describe('요약 카드')
  it('전체 이슈 수, 진행중, 완료, 미착수 건수를 카드로 표시한다')
  it('기간 프리셋(7일/30일/90일/전체)으로 대상 기간을 변경할 수 있다')
  it('커스텀 날짜 범위를 직접 입력할 수 있다')
  it('기간 변경 시 모든 통계가 해당 기간 기준으로 재계산된다')

describe('이번 주 마감 이슈')
  it('현재 주(월~일) 기준 dueDate가 포함된 이슈를 최대 10건 표시한다')
  it('마감일 오름차순으로 정렬한다')
  it('이슈가 없으면 빈 상태 메시지를 표시한다')

describe('담당자별 워크로드')
  it('완료되지 않은 이슈를 담당자별로 집계하여 막대 그래프로 표시한다')
  it('미할당 이슈는 "(미할당)"으로 그룹핑한다')
  it('건수 내림차순으로 최대 8명까지 표시한다')

describe('최근 업데이트 이슈')
  it('수정일(updated) 기준 최신 8건을 표시한다')
  it('이슈 클릭 시 상세 모달이 열린다')
  it('상대 시간(방금 전, N분 전, N시간 전, N일 전)으로 표시한다')

describe('이슈 타입별 분포')
  it('에픽/스토리/작업/하위작업/버그 타입별 건수를 배지로 표시한다')
  it('한글/영문 이슈타입을 정규화하여 통합한다 (예: "새기능" → story)')

describe('최근 변경 추적')
  it('changelog에서 최근 15건의 변경사항을 표시한다')
  it('변경 유형별(신규/상태/담당자/우선순위/SP/해결) 컬러 배지를 적용한다')
  it('변경 전후 값을 "이전값 → 새값" 형식으로 표시한다')
```

---

## 5. 타임라인 (Timeline / Gantt)

```
describe('간트 차트 렌더링')
  it('이슈를 행으로, 기간(created~dueDate)을 수평 바로 표시한다')
  it('dueDate가 없는 이슈의 바를 숨길 수 있다')
  it('월 뷰와 주 뷰를 전환할 수 있다')
  it('주 뷰에서 일자 표시 및 주 그룹 강조를 렌더링한다')

describe('줌 & 스크롤')
  it('줌 레벨을 0.25x ~ 4x 범위에서 조절할 수 있다')
  it('"오늘" 버튼 클릭 시 현재 날짜 위치로 스크롤한다')
  it('플로팅 컨트롤 UI를 접기/펼치기할 수 있다')

describe('필터 & 기간')
  it('상태/이슈타입/담당자/라벨 등 공통 필터를 적용할 수 있다')
  it('기간 프리셋(1개월/3개월/6개월/전체)으로 표시 범위를 변경할 수 있다')
  it('이슈타입별로 바 표시/숨김과 행 표시/숨김을 독립 제어할 수 있다')

describe('좌측 패널')
  it('이슈 목록 패널에서 이슈 상태를 표시한다')
  it('패널 너비를 드래그로 리사이즈할 수 있다')

describe('이슈 상호작용')
  it('바 또는 행 클릭 시 이슈 상세 모달이 열린다')
  it('이슈 키 클릭 시 외부 브라우저에서 Jira 페이지를 연다')
```

---

## 6. 라벨별 통계 (Stats)

```
describe('라벨 통계 테이블')
  it('라벨별 전체/완료/미완료 건수와 완료율을 테이블로 표시한다')
  it('라벨이 없는 이슈는 "(없음)"으로 집계한다')
  it('전체 건수 내림차순으로 정렬한다')
  it('완료율을 프로그레스 바와 소수점 1자리 퍼센트로 표시한다')

describe('차트 뷰')
  it('도넛 차트로 라벨별 이슈 분포를 시각화한다')
  it('범례에 라벨명, 건수, 비율을 표시한다')

describe('필터 & 기간')
  it('공통 필터(상태/타입/담당자)를 적용할 수 있다')
  it('기간 프리셋(7일/30일/90일/전체)과 커스텀 날짜로 범위를 지정할 수 있다')
  it('테이블/차트 뷰를 토글할 수 있다')
```

---

## 7. 라벨 메모 (Label Notes)

```
describe('라벨 메모 CRUD')
  it('라벨명을 입력하여 새 메모를 추가할 수 있다')
  it('이미 존재하는 라벨명으로는 중복 추가할 수 없다')
  it('메모 내용을 textarea에 입력하면 500ms 디바운스 후 자동 저장된다')
  it('삭제 버튼 클릭 시 해당 라벨 메모를 삭제한다')

describe('Jira 라벨 연동')
  it('Jira에 존재하지만 메모가 없는 라벨을 빠른 추가 버튼으로 표시한다')
  it('빠른 추가 버튼 클릭 시 해당 라벨의 빈 메모를 생성한다')
  it('Jira에 존재하는 라벨에는 "Jira" 배지를 표시한다')
```

---

## 8. 리포트 (Reports)

```
describe('AI 리포트 프롬프트 생성')
  it('담당자/시작일/종료일을 선택하여 프롬프트를 생성한다')
  it('해당 기간의 필터링된 이슈 건수를 표시한다')
  it('프롬프트에 라벨 정의, 티켓 상세 기준, 리포트 형식 템플릿이 포함된다')
  it('프롬프트 복사 버튼 클릭 시 클립보드에 복사된다')
  it('이슈 데이터 다운로드 버튼 클릭 시 필터링된 이슈를 JSON 파일로 저장한다')

describe('리포트 저장 & 조회')
  it('제목과 마크다운 내용을 입력하여 리포트를 .md 파일로 저장할 수 있다')
  it('저장된 리포트 목록을 파일명과 수정일로 표시한다')
  it('리포트 클릭 시 마크다운 → HTML 변환하여 렌더링한다')
  it('마크다운 렌더링에서 헤딩/테이블/리스트/인라인코드/볼드/인용/수평선을 지원한다')
  it('목록으로 돌아가기 버튼이 동작한다')
```

---

## 9. OKR 캔버스

```
describe('Objective CRUD')
  it('새 Objective를 추가할 수 있다')
  it('Objective 제목을 더블클릭 또는 편집 버튼으로 인라인 수정할 수 있다')
  it('Objective 삭제 시 하위 KR, 연결된 링크, 그룹, 관계를 모두 삭제한다')
  it('삭제 전 confirm 다이얼로그를 표시한다')
  it('Objective를 접기/펼치기할 수 있다')

describe('Key Result CRUD')
  it('Objective 하위에 KR을 추가할 수 있다')
  it('KR 제목을 인라인 수정할 수 있다')
  it('KR 삭제 시 연결된 링크, 그룹, 관계, 고아 가상 티켓을 함께 삭제한다')
  it('KR별 진행률을 연결된 Jira 이슈의 done 비율로 계산한다')
  it('Objective 진행률을 하위 KR 진행률의 평균으로 계산한다')

describe('작업 연결')
  it('Jira 이슈를 키 또는 요약으로 검색하여 KR에 연결할 수 있다')
  it('이미 연결된 이슈는 검색 결과에서 제외된다')
  it('가상 티켓을 제목/타입/담당자를 입력하여 생성 및 연결할 수 있다')
  it('연결 해제(unlink) 시 링크만 삭제하고, 고아 가상 티켓이면 함께 삭제한다')
  it('가상 티켓 삭제 시 연결된 링크와 관계를 함께 삭제한다')

describe('캔버스 뷰포트')
  it('줌(Ctrl+Wheel)을 MIN_ZOOM(0.3) ~ MAX_ZOOM(3) 범위에서 조절할 수 있다')
  it('빈 공간 드래그로 팬(이동)할 수 있다')
  it('"맞춤" 버튼 클릭 시 모든 요소를 화면에 맞추어 zoom/pan을 자동 조정한다')
  it('ESC 키로 캔버스 모달을 닫을 수 있다')
  it('ESC 키 중첩 처리: 링크 모달 열림 → 링크 모달 닫기, 이슈 상세 모달 열림 → 상세 닫기, 그 외 → 캔버스 닫기')

describe('카드 드래그')
  it('카드를 드래그하여 캔버스 위치를 변경할 수 있다')
  it('드래그 임계값(DRAG_THRESHOLD) 이내의 이동은 클릭으로 처리한다')
  it('드래그 직후 클릭 이벤트를 억제한다 (wasDraggingRef)')
  it('드래그 완료 후 카드가 이전 위치로 깜빡이지 않는다 (requestAnimationFrame 지연 처리)')
  it('그룹 내 카드를 위/왼쪽 방향으로도 그룹 밖으로 드래그할 수 있다 (음수 좌표 허용)')
  it('비그룹 카드와 그룹은 캔버스 원점(0,0) 이하로 이동하지 않는다')

describe('카드 그룹 이동')
  it('비그룹 카드를 그룹 영역에 드롭하면 그룹에 편입된다 (canvas-absolute → group-relative 좌표 변환)')
  it('그룹 내 카드를 그룹 밖에 드롭하면 그룹에서 이탈한다 (group-relative → canvas-absolute 좌표 변환)')
  it('같은 그룹/비그룹 영역 내 드롭 시 로컬 좌표만 업데이트한다')
  it('히트테스트는 카드 중심점(centerX, centerY) 기준이며, 그룹 헤더 영역은 제외한다')

describe('그룹 CRUD')
  it('그룹을 추가하면 자동 배치된 위치에 생성된다')
  it('그룹 이름을 더블클릭 또는 편집 버튼으로 수정할 수 있다')
  it('그룹 삭제 시 소속 카드를 비그룹으로 이동한다 (canvas-absolute 좌표 변환)')
  it('그룹 우하단 핸들로 리사이즈할 수 있다 (최소 200x100)')
  it('그룹을 드래그하여 위치를 변경할 수 있다')

describe('관계 화살표')
  it('연결 모드 진입 시 시작 카드 → 도착 카드 순서로 클릭하여 관계를 생성한다')
  it('같은 카드를 두 번 클릭하면 선택을 취소한다')
  it('이미 존재하는 관계는 중복 생성하지 않는다 (양방향 체크)')
  it('화살표를 SVG bezier curve + arrowhead marker로 렌더링한다')
  it('연결 모드에서 화살표 중간점의 X 버튼 클릭 시 관계를 삭제할 수 있다')
  it('데이터(links/groups) 변경, zoom/pan 변경 시 화살표를 자동 재계산한다')
  it('ResizeObserver로 캔버스 크기 변경 시에도 화살표를 재계산한다')

describe('카드 상호작용')
  it('Jira 카드 클릭 시 이슈 상세 모달이 열린다 (비연결모드)')
  it('Jira 카드에 이슈 키, 요약, 상태 배지, 담당자, 우선순위를 표시한다')
  it('가상 티켓 카드의 제목을 인라인 편집할 수 있다')
  it('가상 티켓 카드에 타입, 담당자를 표시한다')
  it('연결 모드에서 카드 클릭 시 관계 생성 flow가 실행된다')

describe('OKR 데이터 영속성')
  it('OKR 데이터가 okr.json에 저장된다')
  it('앱 재시작 후 OKR 데이터가 복원된다')
  it('updatedAt이 매 변경 시 갱신된다')

describe('KR 시각적 구분')
  it('KR 카드가 border + rounded + shadow-sm 스타일로 구분된다')
  it('KR 영역 배경이 bg-gray-100/70으로 Objective 영역과 대비된다')
```

---

## 10. AI 터미널 (Terminal)

```
describe('터미널 세션')
  it('터미널 패널을 열면 PTY 세션이 생성된다')
  it('키보드 입력이 PTY에 전달되고 출력이 xterm.js에 렌더링된다')
  it('터미널 크기를 리사이즈할 수 있다')
  it('터미널을 닫으면 PTY 세션이 종료된다')
  it('패키징된 앱에서도 터미널 CLI가 정상 실행된다')

describe('AI CLI 지원')
  it('Claude 또는 Gemini AI 타입을 선택하여 터미널을 생성할 수 있다')
  it('초기 프롬프트가 PTY에 자동 전달된다')
```

---

## 11. 네비게이션 & 레이아웃

```
describe('사이드바 네비게이션')
  it('대시보드/과제목록/타임라인/통계/라벨메모/리포트/OKR/설정 페이지로 전환할 수 있다')
  it('현재 페이지에 해당하는 메뉴가 활성 상태로 표시된다')

describe('공통 빈 상태')
  it('데이터 미존재 시 각 페이지에서 "설정으로 이동" 버튼과 싱크 버튼을 표시한다')
  it('로딩 중 Spinner를 표시한다')
  it('에러 발생 시 에러 메시지를 표시한다')
```

---

## 12. 데이터 스토리지 (Main Process)

```
describe('파일 기반 저장소')
  it('latest.json에 최신 이슈 데이터를 저장/로드한다')
  it('snapshots/ 디렉토리에 날짜별 스냅샷을 저장한다')
  it('changelog.json에 변경 이력을 누적 저장한다')
  it('label-notes.json에 라벨 메모를 저장/로드한다')
  it('reports/ 디렉토리에 .md 리포트를 저장/목록조회/로드한다')
  it('okr.json에 OKR 데이터를 저장/로드한다')
  it('settings.json에 설정을 저장/로드한다')
  it('meta.json에 싱크 이력과 메타데이터를 저장/로드한다')

describe('Zod 스키마 검증')
  it('저장/로드 시 Zod 스키마로 데이터를 검증한다')
  it('유효하지 않은 데이터는 파싱 에러를 발생시킨다')

describe('보관 기간 관리')
  it('retentionDays 초과 스냅샷을 자동 삭제한다')
```
